---
author: èµ¤ç¦
date: 2018-11-13
description: åŒ…æ‹¬æ€ä¹ˆåœ¨ Windows ä¸­ä½¿ç”¨ Linuxã€æ€ä¹ˆè®¾ç½® WSL/Bash/Linux shell ä¸º VScode çš„é»˜è®¤ç»ˆç«¯ã€Code Runner ä½¿ç”¨ WSL/Bash/Linux shell
original:
tags:
  - å¼€å‘ç¯å¢ƒ
  - Linux
  - WSL
title: ã€ŒWSLã€Windows ä¸‹çš„ Linux å¼€å‘ç¯å¢ƒ
categories:
  - develop
---

# Windows ä¸‹çš„ Linux å¼€å‘ç¥å™¨

## ğŸ’ğŸ»â€ ä¸ºä»€ä¹ˆè¦ä½¿ç”¨ Linux

**å¼€æºï¼**

å¼€æº = è‡ªç”±ï¼Œäºæ˜¯ä¸–ç•Œä¸Šæœ‰ N å¤šä¸ªè¡ç”Ÿç‰ˆï¼Œç§ç±»ä¸°å¯Œï¼Œå¯å®šåˆ¶æ€§å¼ºï¼Œç›´æ¥æ“ä½œå†…æ ¸ã€‚ç›¸æ¯”äº Windowsã€MacOs é—­æºæ“ä½œç³»ç»Ÿå®‰å…¨æ€§è¾ƒé«˜ã€‚

ä½ å¯èƒ½è·Ÿä»¥å‰çš„æˆ‘ä¸€æ ·ï¼Œå¯¹ Linux çš„è®¤è¯†å°±æ˜¯é»‘ä¹ä¹çš„ Terminal ç•Œé¢ã€‚å…¶å®ç°åœ¨çš„ Linux ç”±äºå¼€æºå…·æœ‰è¶…å¼ºçš„ä¸ªæ€§åŒ–ï¼Œæ¡Œé¢ç‰ˆå·²ç»ç”©äº† Windows å¾ˆè¿œäº†ï¼Œå°½ç®¡å¦‚ä»Šçš„ Fluent Design æé«˜äº†å¾®è½¯çš„å®¡ç¾ï¼Œä½†æ˜¯ win10 ä¸­æ–‡å­—ä½“åœ¨ä¸€äº›é«˜ DPI ä¸Šè¿˜æ˜¯ç¡¬ä¼¤ã€‚

ä¸çŸ¥é“ä½ æœ‰æ²¡æœ‰è¿™ç§ç»å†ï¼šWindows ç»å¸¸è¦**é‡è£…**ï¼Œç‰¹åˆ«æ˜¯å–œæ¬¢æŠ˜è…¾çš„äººã€‚æ¯æ¬¡é‡è£…ä¸€å¤§å †é…ç½®éœ€è¦å®‰è£…ã€‚Linux å°±å®¹æ˜“äº†å—ï¼Ÿå½“ç„¶ï¼Œä½ åªè¦ä¸€æ¡**å‘½ä»¤**å°±èƒ½å®‰è£…å¤§éƒ¨åˆ†çš„å¼€å‘ç¯å¢ƒï¼Œä¸éœ€è¦å¤æ‚çš„é…ç½®ã€‚å¯¹äº Web å¼€å‘ï¼Œæˆ–è€…æ˜¯åµŒå…¥å¼ç­‰å¼€å‘ï¼ŒLinux çš„ç¯å¢ƒéƒ½æ˜¯é¦–é€‰ã€‚

## What is the WSL ?

**é€‚ç”¨äº Linux çš„ Windows å­ç³»ç»Ÿã€Œè‹±è¯­ï¼šWindows Subsystem for Linuxï¼Œç®€ç§° WSLã€** æ˜¯ä¸€ä¸ªä¸ºåœ¨ Windows 10 ä¸Šèƒ½å¤ŸåŸç”Ÿè¿è¡Œ Linux äºŒè¿›åˆ¶å¯æ‰§è¡Œæ–‡ä»¶ï¼ˆELF æ ¼å¼ï¼‰çš„å…¼å®¹å±‚ã€‚å®ƒæ˜¯ç”±å¾®è½¯ä¸ Canonical å…¬å¸åˆä½œå¼€å‘ï¼Œç›®æ ‡æ˜¯ä½¿çº¯æ­£çš„ Ubuntu 14.04/18.04, OpenSUSE, Kali Linux å’Œ Debian æ˜ åƒèƒ½ä¸‹è½½å’Œè§£å‹åˆ°ç”¨æˆ·çš„æœ¬åœ°è®¡ç®—æœºï¼Œå¹¶ä¸”æ˜ åƒå†…çš„å·¥å…·å’Œå®ç”¨å·¥å…·èƒ½åœ¨æ­¤å­ç³»ç»Ÿä¸ŠåŸç”Ÿè¿è¡Œã€‚

WSL æä¾›äº†ä¸€ä¸ªå¾®è½¯å¼€å‘çš„ Linux å…¼å®¹å†…æ ¸æ¥å£ï¼ˆä¸åŒ…å« Linux ä»£ç ï¼‰ï¼Œæ¥è‡ª Ubuntu çš„ç”¨æˆ·æ¨¡å¼äºŒè¿›åˆ¶æ–‡ä»¶åœ¨å…¶ä¸Šè¿è¡Œã€‚

è¯¥å­ç³»ç»Ÿä¸èƒ½è¿è¡Œæ‰€æœ‰ Linux è½¯ä»¶ï¼Œä¾‹å¦‚é‚£äº›å›¾å½¢ç”¨æˆ·ç•Œé¢ï¼Œä»¥åŠé‚£äº›éœ€è¦æœªå®ç°çš„ Linux å†…æ ¸æœåŠ¡çš„è½¯ä»¶ã€‚ ä¸è¿‡ï¼Œè¿™å¯ä»¥ç”¨åœ¨å¤–éƒ¨ X æœåŠ¡å™¨ä¸Šè¿è¡Œçš„å›¾å½¢ X çª—å£ç³»ç»Ÿç¼“è§£ã€‚

_Tipï¼šé€‚ç”¨äº Windows 1607 (build 14316)åŠå…¶ä»¥ä¸Šç‰ˆæœ¬ï¼Œéœ€è¦å¼€å¯å¼€å‘è€…æ¨¡å¼ï¼Œå¹¶ä¸”æœ€å¥½æ˜¯ä¸“ä¸šç‰ˆä»¥ä¸Šç‰ˆæœ¬ï¼Œå…·ä½“æ”¯æŒæƒ…å†µè¯· Google_

## ğŸ•µğŸ» ç®€å•ä¸¤æ­¥å¼€å¯ WSL

#### ä¸€ã€å¯ç”¨ é€‚ç”¨äº Linux çš„ Windows å­ç³»ç»Ÿ

1. æ§åˆ¶é¢æ¿

2. ç¨‹åºå’Œå¸è½½

3. å¯ç”¨æˆ–å…³é—­ windows åŠŸèƒ½

   [![](/img/wsl0.jpg)](/img/wsl0.jpg)

4. æ‰¾ä¸åˆ°çš„è¯å°è¯•å¼€å¯å¼€å‘è€…æ¨¡å¼

   windows è®¾ç½® -> æ›´æ–°ä¸å®‰å…¨ -> å¼€å‘è€…æ¨¡å¼

   [![](/img/wsl7.png)](/img/wsl7.png)

5. é‡å¯ç³»ç»Ÿ

#### äºŒã€å®‰è£…ä½ å–œæ¬¢çš„å‘è¡Œç‰ˆ

1. æ‰“å¼€ Microsoft Store

2. æœç´¢ wsl

3. å®‰è£…ä½ å–œæ¬¢çš„ä»»æ„å‘è¡Œç‰ˆ

   _Windows ç›®å‰åªæä¾› Debian ç³»çš„å‘è¡Œç‰ˆï¼Œå½“ç„¶ SUSE ä¹Ÿå¾ˆé¦™_

   [![](/img/wsl1.jpg)](/img/wsl1.jpg)

   ğŸ”¥ æ¨èä½¿ç”¨è½»é‡ã€å®‰å…¨ã€å¿«é€Ÿã€å¯¹ Web å¼€å‘å‹å¥½çš„ Alpine Linux [https://github.com/agowa338/WSL-DistroLauncher-Alpine](https://github.com/agowa338/WSL-DistroLauncher-Alpine)

4. æ‰“å¼€ä½ çš„ Linux ä¼šå‡ºç° installing â€¦â€¦

   _å®‰è£…å¤±è´¥å¯ä»¥é‡æ–°æ‰“å¼€ï¼Œæˆ–è€…å¸è½½é‡æ–°å®‰è£…ï¼Œå†æˆ–è€…é‡æ–°å¼€å¯ä¸€ä¸‹ [å¯ç”¨ é€‚ç”¨äº Linux çš„ Windows å­ç³»ç»Ÿ](#å¯ç”¨-é€‚ç”¨äº-linux-çš„-windows-å­ç³»ç»Ÿ)_

5. è¾“å…¥ç”¨æˆ·åã€å¯†ç å³å¯å¼€å¯ä½ çš„ Linux ä¹‹æ—…

## ğŸ’ªğŸ» WSL ä½¿ç”¨ã€ç®¡ç†ã€åœ¨ VScode ä¸­ä½¿ç”¨

#### å¿«é€Ÿè®¿é—®

- å¿«é€Ÿå¯åŠ¨ bash

  CMD æˆ–è€… PowerShell ä¸­ç›´æ¥è¾“å…¥ bash æˆ–è€… wsl å›è½¦

  [![](/img/wsl2.png)](/img/wsl2.png)

- è¿è¡Œ bash

  win + R è¾“å…¥ bash æˆ–è€… wsl å›è½¦

  [![](/img/wsl3.png)](/img/wsl3.png)

- åœ¨ç›®å½•ä¸­å¿«é€Ÿæ‰“å¼€

  åœ¨ç›®å½•ä¸‹`shift + é¼ æ ‡å³é”®`å³å¯å¿«é€Ÿè°ƒå‡º`åœ¨æ­¤å¤„æ‰“å¼€ Linux Shell`

  _ä»…æ”¯æŒ Windows 1803 åŠä»¥ä¸Š_

  [![](/img/wsl6.png)](/img/wsl6.png)

#### WSL çš„è·¯å¾„ã€ä¸ win çš„å…³ç³»

WSL çš„æ ¹ç›®å½• `%localappdata%\Packages\` + å«åˆ†å‘åçš„æ–‡ä»¶å¤¹å `+\LocalState\rootfs`ã€‚åˆ†å‘åå­—å¯é€šè¿‡æœç´¢ä½ çš„åˆ†å‘ç‰ˆåç§°æ‰¾åˆ°ã€‚æ‰¾åˆ°è·¯å¾„åå¯ä»¥å¯¹ç›®å½•å³é”®å›ºå®šåˆ°å¿«é€Ÿè®¿é—®ä»¥ä¾¿ä½¿ç”¨ã€‚

[![](/img/wsl4.jpg)](/img/wsl4.jpg)

WSL æ˜¯ä¸ Windows å…±äº«ç£ç›˜ã€ç¯å¢ƒ PATH çš„ï¼Œåœ¨ wsl ä¸­è¾“å…¥`export`

[![export ä¹‹å](/img/wsl5.png)](/img/wsl5.png)

æ³¨æ„è·¯å¾„æ˜¯æŒ‚è½½åœ¨ wsl çš„ mnt æ–‡ä»¶ä¸­ï¼Œæ‰€æœ‰ç›˜ç¬¦éƒ½è¦æ›¿æ¢ã€‚ä¾‹å¦‚`D:/test => /mnt/d/test`ã€‚å¹¶ä¸” wsl ä¸­æ˜¯å¯ä»¥ç›´æ¥æ‰“å¼€ exe çš„ï¼ˆå®è´¨æ˜¯ Windows æ‰“å¼€çš„ï¼‰ï¼Œä½†æ˜¯ Windows ä¸èƒ½ç›´æ¥æ‰“å¼€ä¸å¸¦åç¼€åçš„äºŒè¿›åˆ¶æ–‡ä»¶ã€‚PATH è™½ç„¶å…±äº«ï¼Œè¦ç›´æ¥ä½¿ç”¨ä¹Ÿæ˜¯ä¸è¡Œçš„ã€‚æ¯”å¦‚æˆ‘åœ¨ WSL è£…äº† GCCï¼ŒWin çš„ IDE åœ¨é…ç½®ç¯å¢ƒçš„æ—¶å€™å°±ä¸èƒ½ä½¿ç”¨å®ƒï¼Œåªèƒ½é€šè¿‡ç»ˆç«¯æ‰‹åŠ¨å‘½ä»¤ã€‚

#### å¤šåˆ†å‘ç‰ˆé…ç½®

ä½ å¯èƒ½åœ¨åº”ç”¨å•†åº—è£…äº†å¤šä¸ª WSLï¼Œç³»ç»Ÿå¯ä»¥æŒ‡æ´¾ä¸€ä¸ªé»˜è®¤åˆ†å‘ç‰ˆ

1. æ‰“å¼€ CMD or PowerShell

2. è¾“å…¥ `wslconfig` å›è½¦å³å¯è°ƒå‡ºå¹¶ç®¡ç† Windows ä¸Šæ‰€æœ‰çš„ Linux åˆ†å‘

   ```
   Windows PowerShell
   ç‰ˆæƒæ‰€æœ‰ (C) Microsoft Corporationã€‚ä¿ç•™æ‰€æœ‰æƒåˆ©ã€‚

   PS C:\Windows\system32> wslconfig
   å¯¹ Windows ä¸Šçš„ Linux å­ç³»ç»Ÿè¿›è¡Œæ“ä½œç®¡ç†

   ç”¨é€”ï¼š
       /l, /list [/all]
           åˆ—å‡ºå·²æ³¨å†Œçš„åˆ†å‘ç‰ˆã€‚
           /all - æœ‰é€‰æ‹©åœ°åˆ—å‡ºæ‰€æœ‰åˆ†å‘ç‰ˆï¼ŒåŒ…æ‹¬
               å½“å‰æ­£åœ¨å®‰è£…æˆ–å¸è½½çš„åˆ†å‘ç‰ˆã€‚

       /s, /setdefault <DistributionName>
           å°†è¯¥åˆ†å‘ç‰ˆè®¾ä¸ºé»˜è®¤ã€‚

       /t, /terminate <DistributionName>
           ç»ˆæ­¢åˆ†å‘ã€‚

       /u, /unregister <DistributionName>
           å–æ¶ˆåˆ†å‘ç‰ˆæ³¨å†Œã€‚

       /upgrade <DistributionName>
           å°†åˆ†å‘ç‰ˆå‡çº§è‡³ WslFs æ–‡ä»¶ç³»ç»Ÿæ ¼å¼ã€‚
   PS C:\Windows\system32>
   ```

#### VSCode é…ç½®

VSCode å¯ä»¥ç›´æ¥é…ç½®æˆ WSL çš„ç»ˆç«¯

åœ¨ setting.json ä¸­ä¿®æ”¹æ¡ç›®ï¼ˆæˆ–è€…ç›´æ¥åŠ å…¥ï¼‰

```json
"terminal.integrated.shell.windows": "C://Windows//System32//cmd.exe",
"terminal.external.windowsExec": "C://Windows//System32//cmd.exe",

// æ”¹ä¸º

"terminal.integrated.shell.windows": "C://Windows//System32//wsl.exe",
"terminal.external.windowsExec": "C://Windows//System32//wsl.exe",
```

å¯¹äºä½¿ç”¨ Code Runner æ’ä»¶çš„éœ€è¦åŠ å…¥æ¡ç›®

```json
"code-runner.terminalRoot": "/mnt/",
```
